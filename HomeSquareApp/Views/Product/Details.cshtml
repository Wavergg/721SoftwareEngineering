@model int

@* Replace later with STRONGLY TYPED VIEW DATA *@
@{
    ViewData["Title"] = Model;
    int[] objectTestData = new int[6] { 560, 230, 90, 400, 722, 200 };
    bool isLoggedIn = true;
}

@section pageSpecificCss{
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="~/lib/Chart.js/Chart.css" />
    <link rel="stylesheet" href="~/lib/css/productDetails.css" />
    <link rel="stylesheet" href="~/lib/css/magnifier.css" />
}

<div class="py-5">
    <div class="d-flex align-items-center justify-content-center mb-3 pt-4">
        <div class="container flex-md-row d-md-flex justify-content-center">
            @* Product Card Image section *@
            <section class="magnifier-thumb-wrapper w-md-50 card bg-white border-0" style="height:auto">
                <img id="thumb" class="mx-3" src="~/lib/images/products/Shampoo-PNG-Clipart.png" style="object-fit:fill;background-repeat: no-repeat;" asp-append-version="true" />
                <span class="badge" style="border-bottom-left-radius:0;border-top-left-radius:inherit">Specials</span>
            </section>

            @* Product Information Section *@
            <section class="ps-md-5 w-md-50 pt-3 p-md-0">
                <h1>Product Name</h1>
                <p>Loremwang Lorem Ipsum passages, ane like Aldus PageMaker including versions of Lorem Ipsum.</p>
                <div class="d-flex align-items-center">
                    <div>
                        @* Do price after discount, Split price and store it in different variable and do a razor field for whole number and decimal *@
                        <span class="product-price">$</span><span class="product-price">100</span><sup class="product-price-decimal">50</sup>
                        @* Price before discount *@
                        <p>Was <span class="product-price-before-special">$125.00</span></p>
                    </div>
                    <div class="ms-auto">
                        @* Price per unit *@
                        <span class="fw-normal">$14.00 / Ea.</span>
                    </div>
                </div>
                <button class="btn btn-success form-control rounded-pill">Add To Cart</button>
                <a asp-controller="Checkout" asp-action="Index" class="my-3 btn btn-light border-secondary text-dark form-control rounded-pill">Check Out</a>
                @*<a href="#headingReview" class="btn btn-light text-dark rounded-pill">Review</a>*@
            </section>
        </div>
    </div>

    <div class="mt-5">
        <ul class="nav nav-tabs justify-content-center" id="productTab" role="tablist">
            <li class="nav-item" role="presentation">
                <button class="nav-link " id="productInfo-tab" data-bs-toggle="tab" data-bs-target="#productInfo" type="button" role="tab" aria-controls="productInfo" aria-selected="false">Product Information</button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="statiscic-tab" data-bs-toggle="tab" data-bs-target="#statiscic" type="button" role="tab" aria-controls="statiscic" aria-selected="false">Statistic</button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link active" id="rating-tab" data-bs-toggle="tab" data-bs-target="#rating" type="button" role="tab" aria-controls="rating" aria-selected="true">Rating</button>
            </li>
        </ul>
        <div class="tab-content bg-light" id="productTabContent" style="min-height:450px;">
            <div class="tab-pane fade" id="productInfo" role="tabpanel" aria-labelledby="productInfo-tab">
                <div class="container py-5">
                    <dl class="row">
                        <dt class="col-sm-3">Description lists</dt>
                        <dd class="col-sm-9">A description list is perfect for defining terms.</dd>

                        <dt class="col-sm-3">Term</dt>
                        <dd class="col-sm-9">
                            <p>Definition for the term.</p>
                            <p>And some more placeholder definition text.</p>
                        </dd>

                        <dt class="col-sm-3">Another term</dt>
                        <dd class="col-sm-9">This definition is short, so no extra paragraphs or anything.</dd>

                        <dt class="col-sm-3 text-truncate">Truncated term is truncated</dt>
                        <dd class="col-sm-9">This can be useful when space is tight. Adds an ellipsis at the end.</dd>

                        <dt class="col-sm-3">Nesting</dt>
                        <dd class="col-sm-9">
                            <dl class="row">
                                <dt class="col-sm-4">Nested definition list</dt>
                                <dd class="col-sm-8">I heard you like definition lists. Let me put a definition list inside your definition list.</dd>
                            </dl>
                        </dd>
                    </dl>
                </div>
            </div>
            <div class="tab-pane fade" id="statiscic" role="tabpanel" aria-labelledby="statiscic-tab">
                <div class="container py-5">
                    <div class="row justify-content-center">
                        <div class="col-md-6">
                            <canvas width="580" height="400" id="myChart"></canvas>
                        </div>
                    </div>
                </div>
            </div>
            <div class="tab-pane fade show active" id="rating" role="tabpanel" aria-labelledby="rating-tab">
                <div class="container py-5">
                    <span class="heading">User Rating</span>
                    <span class="fa fa-star checked"></span>
                    <span class="fa fa-star checked"></span>
                    <span class="fa fa-star checked"></span>
                    <span class="fa fa-star checked"></span>
                    <span class="fa fa-star"></span>
                    <p>4.1 average based on 254 reviews.</p>
                    <div class="row">
                        <div class="side">
                            <div>5 star</div>
                        </div>
                        <div class="middle">
                            <div class="bar-container">
                                <div class="bar-5"></div>
                            </div>
                        </div>
                        <div class="side right">
                            <div>150</div>
                        </div>
                        <div class="side">
                            <div>4 star</div>
                        </div>
                        <div class="middle">
                            <div class="bar-container">
                                <div class="bar-4"></div>
                            </div>
                        </div>
                        <div class="side right">
                            <div>63</div>
                        </div>
                        <div class="side">
                            <div>3 star</div>
                        </div>
                        <div class="middle">
                            <div class="bar-container">
                                <div class="bar-3"></div>
                            </div>
                        </div>
                        <div class="side right">
                            <div>15</div>
                        </div>
                        <div class="side">
                            <div>2 star</div>
                        </div>
                        <div class="middle">
                            <div class="bar-container">
                                <div class="bar-2"></div>
                            </div>
                        </div>
                        <div class="side right">
                            <div>6</div>
                        </div>
                        <div class="side">
                            <div>1 star</div>
                        </div>
                        <div class="middle">
                            <div class="bar-container">
                                <div class="bar-1"></div>
                            </div>
                        </div>
                        <div class="side right">
                            <div>20</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="container mt-5">
        <h2>Reviews</h2>
        @* NYD Use user role here *@
        @if (!isLoggedIn) {
            <div>
                <a href="#" class="text-primary fw-bold">Log in</a> to post review
            </div>
        } else { 
            <div class="d-md-flex">
                <div class="px-md-5 px-4 py-md-4 pt-2 align-items-center d-flex">
                    <img src="~/lib/images/users/blank-profile.png" class="rounded-circle" style="height:50px;width:50px" />
                </div>
                <div class="flex-grow-1 ms-3">
                    <form action="">
                        <div class="stars">
                            <input class="star star-5" id="star-5" type="radio" name="star" />
                            <label class="star star-5" for="star-5"></label>
                            <input class="star star-4" id="star-4" type="radio" name="star" />
                            <label class="star star-4" for="star-4"></label>
                            <input class="star star-3" id="star-3" type="radio" name="star" />
                            <label class="star star-3" for="star-3"></label>
                            <input class="star star-2" id="star-2" type="radio" name="star" />
                            <label class="star star-2" for="star-2"></label>
                            <input class="star star-1" id="star-1" type="radio" name="star" />
                            <label class="star star-1" for="star-1"></label>
                        </div>
                        <div class="form-floating">
                            <textarea onkeyup="textAreaAdjust(this)" class="form-control" placeholder="Leave a comment here" id="floatingTextarea2" style="height: 100px"></textarea>
                            <label for="floatingTextarea2" class="text-muted">Enter Your Review</label>
                        </div>
                        <button class="btn btn-success mt-2">Submit Review</button>
                    </form>
                </div>
            </div>
        }
        <div class="text-muted">
            <hr class="" />
        </div>
        <div class="bg-light">
            @for (int i = 0; i < 3; i++)
            {
                <partial name="_reviewCardPartial" />
            }
        </div>
    </div>

</div>

@section Scripts {
    @* Script for line chart *@
    <script src="~/lib/Chart.js/Chart.js"></script>
    <script>
        var config = {
            type: 'line',
            data: {
                labels: ['21 Feb', '28 Feb', '7 Mar', '14 Mar', '21 Mar', '28 Mar'],
                datasets:
                    [{
                        lineTension: 0.1,
                        label: '# of purchase',
                        fill: true,
                        backgroundColor: [
                            'rgba(255, 99, 132, 0.2)',
                        ],
                        borderColor: [
                            'rgba(255, 99, 132, 1)',
                        ],
                        data: [
                            '12',
                            13,
                            65,
                            59,
                            20,
                            21
                        ],
                    }],
            },
            options: {
                responsive: true,
                //title: {
                //    display: true,
                //    text: 'Items bought per week'
                //},
                tooltips: {
                    mode: 'index',
                    intersect: false,
                },
                hover: {
                    mode: 'nearest',
                    intersect: true
                },
                scales: {
                    xAxes: [{
                        display: true,
                        scaleLabel: {
                            display: true,
                            labelString: 'End of the week'
                        }
                    }],
                    yAxes: [{
                        display: true,
                        scaleLabel: {
                            display: true,
                            labelString: 'Quantity'
                        }
                    }]
                }
            }
        };

        window.onload = function () {
            var ctx = document.getElementById('myChart').getContext('2d');
            window.myLine = new Chart(ctx, config);
        };
    </script>

    @* Script For magnifier on product,
        commented the zommable: true because it could be a bad HCI *@
    <script src="~/lib/js/event.js"></script>
    <script src="~/lib/js/magnifier.js"></script>
    <script>
        var evt = new Event(),
            m = new Magnifier(evt);
        m.attach({
            thumb: '#thumb',
            mode: 'inside',
            zoom: 4,
            /*zoomable: true*/
            onthumbenter: function () {
            },
            onthumbmove: function () {
            },
            onthumbleave: function () {
            },
        });
    </script>
    <script>
        function textAreaAdjust(element) {
            element.style.height = "1px";
            element.style.height = (25 + element.scrollHeight) + "px";
        }
    </script>
}