function textAreaAdjust(e) { e.style.height = "1px", e.style.height = 25 + e.scrollHeight + "px" } function readURL(e) { if (e.files && e.files[0]) { var t = new FileReader; t.onload = function (e) { recipeImage.style.backgroundImage = "url('" + e.target.result + "')" }; const n = e.files[0], i = n.type;["image/gif", "image/jpeg", "image/jpg", "image/png"].includes(i) && t.readAsDataURL(n) } } function removeIngredient(e) { document.getElementById(e).remove(), nextIngredientId--; var t = document.getElementsByClassName("ingredientContentWrapper"), n = document.getElementsByClassName("ingredientContentRemove"), r = document.getElementsByClassName("ingredientServingContent"), s = document.getElementsByClassName("ingredientName"); for (i = 0; i < nextIngredientId; i++)t[i].id = "IngredientContent" + i, n[i].setAttribute("onClick", "removeIngredient('IngredientContent" + i + "');"), r[i].setAttribute("name", "Ingredients[" + i + "].ServingContent"), s[i].setAttribute("name", "Ingredients[" + i + "].IngredientName") } function removeSteps(e) { document.getElementById(e).remove(), nextInstructionId--; var t = document.getElementsByClassName("instructionStepWrapper"), n = document.getElementsByClassName("instructionStepRemove"), r = document.getElementsByClassName("step-number"), s = document.getElementsByClassName("stepTextArea"); document.getElementById("stepTextAreaLabel"); for (i = 0; i < nextInstructionId; i++)t[i].id = "StepsContent" + i, n[i].setAttribute("onClick", "removeSteps('StepsContent" + i + "');"), r[i].innerHTML = i + 1, s[i].id = "RecipeSteps_" + i + "__Steps", s[i].setAttribute("name", "RecipeSteps[" + i + "].Steps") } $(document).on("keydown", ":input:not(textarea)", function (e) { return "Enter" != e.key }), $("#Image").change(function () { readURL(this) }), $("#addIngredient").click(function () { var e = '<div class="ingredientContentWrapper d-flex my-3" id="IngredientContent' + nextIngredientId + '">\n\n                            <div class="form-floating col-4">\n                                <input name="Ingredients[' + nextIngredientId + '].ServingContent" type="text" class="ingredientServingContent form-control" placeholder="0">\n                                <label>Amount</label>\n                            </div>\n                            <div class="form-floating flex-fill">\n                                <input  name="Ingredients[' + nextIngredientId + '].IngredientName" type="text" class="ingredientName form-control" onkeyup="app.triggerSearchQuery(this)">\n                                <label>Ingredient Name</label>\n                            </div>\n                            <button type="button" onclick="removeIngredient(\'IngredientContent\'+' + nextIngredientId + ')" class="ingredientContentRemove text-danger fw-bold btn btn-default">X</button>\n                        </div>'; nextIngredientId++, $("#ingredientRow").append(e) }), $("#addInstruction").click(function () { var e = '<div class="instructionStepWrapper card shadow-sm pt-5 pb-4 px-4 my-2" id="StepsContent' + nextInstructionId + '">\n                            <div class="position-absolute start-0 top-0 mx-4 mt-3">\n                                <small class="fw-bold">Step <span class="step-number">' + (nextInstructionId + 1) + '</span></small>\n                                <a style="cursor:pointer" onclick="removeSteps(\'StepsContent' + nextInstructionId + '\')" class="instructionStepRemove text-decoration-none text-danger fw-bold">X</a>\n                            </div>\n                            <div>\n                                <div class="form-floating">\n                                    <textarea id="RecipeSteps_' + nextInstructionId + '__Steps" name="RecipeSteps[' + nextInstructionId + '].Steps" class="stepTextArea form-control" onkeyup="textAreaAdjust(this)" style="height: 85px" placeholder="Describe Instruction"></textarea>\n                                    <label for="RecipeSteps_' + nextInstructionId + '__Steps">Instruction</label>\n                                </div>\n                            </div>\n                        </div>'; nextInstructionId++, $("#stepsRow").append(e) });